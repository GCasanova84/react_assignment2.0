{"ast":null,"code":"export const fetchUserActivities = () => {\n  const now = Date.now();\n  const currentDate = new Date(now * 1000);\n  let currentYear = currentDate.getFullYear();\n  let currentMonth = currentDate.getMonth() + 1; // (0-11)\n\n  const currentDay = currentDate.getDate();\n  console.log(now);\n\n  if (currentMonth < 3) {\n    currentYear = currentYear - 1;\n    currentMonth = currentMonth + 12;\n  }\n\n  const from = new Date(currentYear, currentMonth - 3, currentDay).getTime() / 1000;\n  console.log(from);\n  const url = `https://www.strava.com/api/v3/athlete/activities?before=${now}&after=${from}`;\n  const token = '42c22f12ee48799d7a0f80ffac2c7ff7fb25afb1';\n  const bearer = `Bearer ${token}`;\n  return async dispatch => {\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Authorization': bearer,\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await response.json();\n    console.log(data);\n    return dispatch(loadUserActivities(data));\n  };\n};\nexport const loadUserActivities = activities => ({\n  type: 'LOAD_ACTIVITIES',\n  payload: activities\n});","map":{"version":3,"sources":["/home/gregory/Documentos/react-assignment/react-assignment/src/actions/user.js"],"names":["fetchUserActivities","now","Date","currentDate","currentYear","getFullYear","currentMonth","getMonth","currentDay","getDate","console","log","from","getTime","url","token","bearer","dispatch","response","fetch","method","headers","data","json","loadUserActivities","activities","type","payload"],"mappings":"AAAA,OAAO,MAAMA,mBAAmB,GAAG,MAAM;AACrC,QAAMC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ;AACA,QAAME,WAAW,GAAG,IAAID,IAAJ,CAASD,GAAG,GAAG,IAAf,CAApB;AACA,MAAIG,WAAW,GAAMD,WAAW,CAACE,WAAZ,EAArB;AACA,MAAIC,YAAY,GAAKH,WAAW,CAACI,QAAZ,KAAyB,CAA9C,CAJqC,CAIY;;AACjD,QAAMC,UAAU,GAAML,WAAW,CAACM,OAAZ,EAAtB;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;;AAEA,MAAIK,YAAY,GAAG,CAAnB,EAAsB;AAClBF,IAAAA,WAAW,GAAGA,WAAW,GAAG,CAA5B;AACAE,IAAAA,YAAY,GAAGA,YAAY,GAAG,EAA9B;AACH;;AACD,QAAMM,IAAI,GAAG,IAAIV,IAAJ,CAASE,WAAT,EAAsBE,YAAY,GAAG,CAArC,EAAwCE,UAAxC,EAAoDK,OAApD,KAAgE,IAA7E;AAEAH,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AAEA,QAAME,GAAG,GAAI,2DAA0Db,GAAI,UAASW,IAAK,EAAzF;AAEA,QAAMG,KAAK,GAAG,0CAAd;AAEA,QAAMC,MAAM,GAAI,UAASD,KAAM,EAA/B;AAEA,SAAO,MAAOE,QAAP,IAAoB;AACvB,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAD,EAAM;AAC9BM,MAAAA,MAAM,EAAE,KADsB;AAE9BC,MAAAA,OAAO,EAAE;AACL,yBAAiBL,MADZ;AAEL,wBAAgB;AAFX;AAFqB,KAAN,CAA5B;AAOA,UAAMM,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAAnB;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAYW,IAAZ;AACA,WAAOL,QAAQ,CAACO,kBAAkB,CAACF,IAAD,CAAnB,CAAf;AACH,GAXD;AAcH,CArCM;AAuCP,OAAO,MAAME,kBAAkB,GAAIC,UAAD,KAAiB;AAC/CC,EAAAA,IAAI,EAAE,iBADyC;AAE/CC,EAAAA,OAAO,EAAEF;AAFsC,CAAjB,CAA3B","sourcesContent":["export const fetchUserActivities = () => {\n    const now = Date.now();\n    const currentDate = new Date(now * 1000);\n    let currentYear    = currentDate.getFullYear();\n    let currentMonth   = currentDate.getMonth() + 1; // (0-11)\n    const currentDay    = currentDate.getDate();\n\n    console.log(now);\n    \n    if (currentMonth < 3) {\n        currentYear = currentYear - 1;\n        currentMonth = currentMonth + 12;\n    }\n    const from = new Date(currentYear, currentMonth - 3, currentDay).getTime() / 1000 ;\n\n    console.log(from);\n\n    const url = `https://www.strava.com/api/v3/athlete/activities?before=${now}&after=${from}`;\n\n    const token = '42c22f12ee48799d7a0f80ffac2c7ff7fb25afb1';\n\n    const bearer = `Bearer ${token}`;\n\n    return async (dispatch) => {\n        const response = await fetch(url, {\n            method: 'GET',\n            headers: {\n                'Authorization': bearer,\n                'Content-Type': 'application/json'\n            }\n        });\n        const data = await response.json();\n        console.log(data)\n        return dispatch(loadUserActivities(data));\n    }\n\n\n}\n\nexport const loadUserActivities = (activities) => ({\n    type: 'LOAD_ACTIVITIES',\n    payload: activities\n})"]},"metadata":{},"sourceType":"module"}